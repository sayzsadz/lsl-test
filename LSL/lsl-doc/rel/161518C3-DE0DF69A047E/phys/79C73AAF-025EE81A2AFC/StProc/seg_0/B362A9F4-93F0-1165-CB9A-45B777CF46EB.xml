<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="CHECK_STORE" directorySegmentName="seg_0" id="B362A9F4-93F0-1165-CB9A-45B777CF46EB">
<sourceConnName>LSL_Cloud_apex</sourceConnName>
<sourceObjSchema>APEX</sourceObjSchema>
<sourceObjName>CHECK_STORE</sourceObjName>
<createdBy>sjayasinghe1</createdBy>
<createdTime>2019-04-29 11:48:23 UTC</createdTime>
<ownerDesignName>lsl-doc</ownerDesignName>
<owner>FB5DE12D-4EA4-254B-AA97-4ED35945C6A7</owner>
<source>CREATE OR REPLACE PROCEDURE APEX.CHECK_STORE (p_data  IN  varchar2, p_msg OUT varchar2)&lt;br/&gt;AS&lt;br/&gt;  lv_StoreId    varchar2(50);&lt;br/&gt;  v_msg         varchar2(100);&lt;br/&gt;BEGIN&lt;br/&gt;    BEGIN&lt;br/&gt;--        SELECT &quot;StoreId&quot;&lt;br/&gt;--        INTO lv_StoreId&lt;br/&gt;--        FROM (select distinct NVL(gcc.attribute10, gcc.segment2) AS &quot;StoreId&quot;&lt;br/&gt;--              ,DECODE(gcc.segment2,NULL,&apos;&apos;,apps.gl_flexfields_pkg.get_description_sql@DATABASE_LINK_APEX_EBS( gcc.chart_of_accounts_id,2,gcc.segment2)) AS &quot;CompanyName&quot;&lt;br/&gt;--              ,&apos;true&apos; AS &quot;Active&quot;&lt;br/&gt;--        from gl_code_combinations@DATABASE_LINK_APEX_EBS gcc) STR&lt;br/&gt;--        WHERE &quot;StoreId&quot;||&quot;CompanyName&quot; = (&lt;br/&gt;--        SELECT StoreId||CompanyName StoreCompanyId&lt;br/&gt;--        FROM &lt;br/&gt;--             JSON_TABLE(&lt;br/&gt;--                        p_data&lt;br/&gt;----          &apos; {&lt;br/&gt;----  &quot;StoreId&quot;: 0910,&lt;br/&gt;----  &quot;CompanyName&quot;: &quot;Head Offie&quot;,&lt;br/&gt;----  &quot;Active&quot;: true&lt;br/&gt;----        }&apos;&lt;br/&gt;--             , &apos;$&apos; COLUMNS (&lt;br/&gt;--              StoreId NUMBER PATH &apos;$.StoreId&apos;,&lt;br/&gt;--              CompanyName VARCHAR2 PATH &apos;$.CompanyName&apos;&lt;br/&gt;--&lt;br/&gt;--        ))&lt;br/&gt;--        );&lt;br/&gt;&lt;br/&gt;                                    INSERT INTO STORE(STOREID, COMPANYNAME, ACTIVE)&lt;br/&gt;                                    SELECT StoreId, CompanyName, Active&lt;br/&gt;                                    FROM &lt;br/&gt;                                         JSON_TABLE(&lt;br/&gt;                                                    p_data&lt;br/&gt;--                                      &apos;&lt;br/&gt;--                                      {&lt;br/&gt;--                                          &quot;StoreId&quot;: &quot;09100&quot;,&lt;br/&gt;--                                          &quot;CompanyName&quot;: &quot;Head Offie&quot;,&lt;br/&gt;--                                          &quot;Active&quot;: true&lt;br/&gt;--                                      }&lt;br/&gt;--                                      &apos;&lt;br/&gt;                                         , &apos;$&apos; COLUMNS (&lt;br/&gt;                                          StoreId VARCHAR2 PATH &apos;$.StoreId&apos;,&lt;br/&gt;                                          CompanyName VARCHAR2 PATH &apos;$.CompanyName&apos;,&lt;br/&gt;                                          Active VARCHAR2 PATH &apos;$.Active&apos;&lt;br/&gt;                                    ));&lt;br/&gt;&lt;br/&gt;            select &apos;successful operation&apos;&lt;br/&gt;            into v_msg&lt;br/&gt;            from dual;&lt;br/&gt;&lt;br/&gt;            p_msg :=  v_msg;&lt;br/&gt;&lt;br/&gt;        EXCEPTION&lt;br/&gt;          WHEN OTHERS THEN&lt;br/&gt;            select &apos;unsuccessful operation&apos;&lt;br/&gt;            into v_msg&lt;br/&gt;            from dual;&lt;br/&gt;&lt;br/&gt;            p_msg :=  v_msg;&lt;br/&gt;      END;&lt;br/&gt;END;</source>
</StoredProcedureOraclev10g>